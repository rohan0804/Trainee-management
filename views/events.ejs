<div class="loader-wrapper">
    <div class="preloader" id="loader"></div>
 </div>
 <div class="page-content">
    <div id="main">
       <header class="nav-container">
             <div class="container-fluid">
                <div class="header">
                   <span onclick="openNav()" id="collapse" class="bars-btn"><i class="fa fa-bars icon"></i></span>
                   <a class="brand" href="javascript:void(0);" title="Website name">Zapbuild HRM</a> 
                </div>
                <ul class="links">
                   <li><a href="javascript:void(0);" title="logout" class="white"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
                </ul>
             </div>
       </header>
       <div class="main-panel" >
          <div class="wrapper">
             <h1 class="page-title">Add Upcoming Events</h1>
          <div class="row">
            <div class="col-sm-8">
               <div class="column-event">
                 <form onsubmit=" return postEvent()">
                   <div class="form-group fields">
                     <label class="form-label">Event Heading</label>
                     <input type="text" name="eventheading" id="heading" class="form-control" placeholder="Event heading here.." required>
                   </div>
                   <div class="form-group fields">
                     <label class="form-label">Event Date</label>
                     <input type="text" name="dob" id="date" class="form-control"  placeholder="MM/DD/YYYY" required>
                   </div>
                   <div class="form-group fields">
                     <label for="reason" class="form-label">Description</label>
                     <textarea class="form-control textarea" rows="5" id="description"  name="description" placeholder="Type here.." required></textarea>
                   </div>
                   <button class="btn buttn" type="submit">Add</button>
                 </form>
               </div>
            </div>
            <div class="col-sm-4">
              <div class="column-event">
                 <div class="card-content">

                        <% events.forEach(event=>{ %>
                              <section class="event">
                                <h2 class="event-info"><%= event.heading%></h3>
                                <p class="event-date"> <%= event.description%></p>
                              </section>
                            <%})%>

                   <!-- <section class="event">
                     <h2 class="event-info">Celebrating Valentines day</h2>
                     <p class="event-date"> Feb-14-2020</p>
                   </section>
                   <section class="event">
                     <h2 class="event-info">Celebrating  Women's day</h2>
                     <p class="event-date"> March-08-2020</p>
                   </section>
                   <section class="event">
                     <h2 class="event-info">Celebrating holi</h2>
                     <p class="event-date"> March-09-2020</p>
                   </section>
                   <section class="event">
                     <h2 class="event-info">Celebrating Valentines day</h2>
                     <p class="event-date"> Feb-14-2020</p>
                   </section>
                   <section class="event">
                     <h2 class="event-info">Celebrating  Women's day</h2>
                     <p class="event-date"> March-08-2020</p>
                   </section>
                   <section class="event">
                     <h2 class="event-info">Celebrating holi</h2>
                     <p class="event-date"> March-09-2020</p>
                   </section> -->
                 </div>
              </div>
            </div>
          </div>  
       </div>
    </div>
    <aside class="sidenav" id="mysidenav">
       <div class="overlay"></div>
       <a href="javascript:void(0)" title="Click to close" class="closebtn" onclick="closeNav()">&times;</a>
       <div class="profile-photo">
          <img src="images/profile.jpeg" width="216" height="233" alt="user's profile pic" class="img-responsive">
       </div>
       <ul class="items">
          <li><a href="javascript:void(0)" title="Add Announcements">Add Announcements</a></li>
          <li><a href="javascript:void(0)" title="Resolve Queries">Add Mentor</a></li>
          <li><a href="javascript:void(0)" title="Trainees Timelog">Trainee leaves</a></li>
          <li><a href="javascript:void(0)" title="Syllabus">Add Department</a></li>
          <li><a href="javascript:void(0)" title="Add Events">Add Events</a></li>
          <li><a href="javascript:void(0)" title="Add marks">Add Trainee</a></li>
          <li><a href="javascript:void(0)" title="Send Email">Send Notifications</a></li>
       </ul>
    </aside>
 </div>
 
 <script>
    function openNav() {
        if($(window).width() <= 1200)
        {
        document.getElementById("mysidenav").style.marginLeft="0";
        document.getElementById("main").style.marginLeft="0";
        document.getElementById("collapse").style.display ="none";
         }
         else{
         document.getElementById("mysidenav").style.marginLeft="0";
        document.getElementById("main").style.marginLeft="230px";
        document.getElementById("collapse").style.display ="none";  
         }
     }
     function closeNav(){
        document.getElementById("mysidenav").style.marginLeft="-230px";
        document.getElementById("main").style.marginLeft="0";
        document.getElementById("collapse").style.display="inline-block";
     } 
     // loader js        
    $(window).on("load",function(){
       $(".loader-wrapper").fadeOut("slow");
    });
    // datepicker js
    $( function() {
      $( "#datepicker" ).datepicker();
    } );

    new WOW().init();

    var socket = io();
        function postEvent(){
            let http = new XMLHttpRequest();
            let url = '/admin/add/event';
            let heading  = document.getElementById('heading').value;
            let description = document.getElementById('description').value;
            let date = document.getElementById('date').value;
            let params = `heading=${heading}&description=${description}&date=${date}`;
            http.open('POST',url,true);
            http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
            http.onreadystatechange = function() {
                if(this.readyState == 4 && this.status == 200) {
                    alert("event Created");
                }
            }
            http.send(params);

            return true;
            
        }

 </script>